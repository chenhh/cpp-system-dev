# BSD socket

## Socket

socket的功該是讓相同或者不同的裝置在兩個不同的程序之間進行通訊。更加確切來說，Socket是使用Unix標準檔案描述器\(file descriptor\)讓不同的設備進行交流的一種方式。

在Unix中，每一個I/O操作都是通過讀或者寫一個檔案描述器來實作，而檔案描述器其實本質上就是一個整數\(標準輸入0，標準輸出為1，標準錯誤為2\)，通過這個整數可以對應一個打開的檔案，而這個檔案可以是一個網路連線、一個文字檔案，亦或是一個終端等。

在開發者的觀點中，socket更像是一個底層的檔案描述器，因為在開發的過程中，不管是對socket的處理還是對檔案或者pipe（管道）處理的時候，都會呼叫read\(\)或者write\(\)函式。

Socket通訊的雙方可以分為客戶端和伺服器端，客戶端的基本流程如下：

* 建立socket
* 連線到伺服器
* 傳送資料到伺服器
* 從伺服器接受資料
* 關閉連線

伺服器端的步驟稍微多一些，主要增加了與埠繫結（bind）和監聽（listen）、接受阻塞（accept）等流程。

![TCP&#x4E92;&#x52D5;&#x6D41;&#x7A0B;](../.gitbook/assets/tcp_socket.jpg)

![UDP&#x4E92;&#x52D5;&#x6D41;&#x7A0B;](../.gitbook/assets/udp_socket.jpg)

