# 借用和生命週期

## 生命週期\(lifetime\)

一個變數的生命週期就是它從創建到銷毀的整個過程。生命週期在必要時可以顯式標記。

```rust
fn main() {
    let v = vec![1, 2, 3, 4, 5]; // --> v 的生命週期開始
    {
        let center = v[2];       // --> center 的生命週期開始
        println!("{}", center);
    }                            // <-- center 的生命週期結束
    println!("{:?}", v);
}                                // <-- v 的生命週期結束
```

## 借用\(borrow\)

如果一個變數永遠只能有唯一一個入口可以訪問的話，那就太難使用了。因此，所有權還可以借用。

借用指標的語法使用**&符號\(唯讀\)**或者**&mut符號**\(可讀寫\)表示。前者表示唯讀借用，後者表示可讀寫借用。**借用指標（borrow pointer）也可以稱作“引用”（reference）**。借用指標與普通指標的內部資料是一模一樣的，唯一的區別是語義層面上的。它的作用是告訴編譯器，它對指向的這塊記憶體區域沒有所有權。

```rust
// 我們需要“可變的”借用指標,因此函數簽名需要改變
fn foo(v: &mut Vec<i32>) {
    v.push(5);
}
fn main() {
    // 我們需要這個動態陣列本身是“可變的”,才能獲得它的“可變借用指針”
    let mut v = vec![];
    // 在函式呼叫的時候,同時也要顯示獲取它的“可變借用指針”
    foo(&mut v);
    // 列印結果,可以看到v已經被改變
    println!("{:?}", v);
}
```

對於&mut型指針，請大家注意不要混淆它與變數綁定之間的語法。

* 如果mut修飾的是變數名，那麼它代表這個變數可以被重新綁定；\(但指向的物件不能被修改\)
* 如果mut修飾的是“借用指標&”，那麼它代表的是被指向的物件可以被修改。\(但變數不能被修改\)

