# 測試

## 簡介

Rust 中的測試函數是用來驗證非測試代碼是否按照期望的方式運行的。測試函數體通常執行如下三種操作：

* 設置任何所需的數據或狀態
* 運行需要測試的代碼
* 斷言(assert)其結果是我們所期望的

## 如何撰寫測試？

加上#\[cfg(test)]的模組在執行cargo test指令的時候其底下有被加上#\[test]的函數會被執行。

Rust的「測試」就是一個函數，這個函數被用來驗證其它非測試函數的函數(沒有加上#\[test]的函數)所實作的功能。

測試函數的主體，通常會有以下三個行為：

1. &#x20;建構測試時需要的資料和狀態。
2. 執行我們要測試的程式(例如要被測試的函數)。
3. 驗證程式執行之後的結果是不是跟我們預期的一樣。

## 測試的組織結構

Rust 傾向於根據測試的兩個主要分類來考慮問題：單元測試（unit tests）與 整合測試（integration tests）。

* 單元測試傾向於更小而更集中，在隔離的環境中一次測試一個模塊，或者是測試私有介面。
* 而整合測試對於你的庫來說則完全是外部的。它們與其他外部代碼一樣，通過相同的方式使用你的代碼，只測試公有介面而且每個測試都有可能會測試多個模塊。
