# 中斷與例外處理

## 簡介

中斷（interrupts）有兩種來源：由硬體產生的和由軟體產生的。通常，在硬體週邊設備需要 CPU 時（例如，要跟 CPU 要資料，或是有資料要給 CPU），會對 CPU 發出中斷要求。軟體也可以利用 INT n 指令來對 CPU 發出中斷要求。

例外（exceptions）分為三種：程式錯誤例外、軟體產生例外、和機器錯誤例外。程式錯誤例外是在處理器偵測到程式有不合法的行為，或是作業系統發生某些錯誤時，由處理器自動發出的例外。這種例外又可分為三種：faults、traps、和 aborts。

軟體產生的例外，是由 INTO、INT3、和 BOUND 指令產生的。例如，INT3 命令會發出一個「程式中斷點」的例外。用 INT n 指令也可以「模擬」例外，但是，例外發生時，處理器會把錯誤碼推入堆疊中，而 INT n 指令則不會。所以，如果直接使用 INT n 指令呼叫例外處理程序，則該程序會從堆疊中取出錯誤碼，而在返回時，會回到錯誤的位址。

在 Pentium 以後的處理器，可以檢查其內部是否有錯誤。在處理器有錯誤時，會產生機器錯誤例外。

中斷向量

中斷和例外是利用一個數字來區分不同的中斷或例外，這個數字稱為「中斷向量」（interrupt vector）。中斷向量是一個由 00H 到 FFH 的數字。其中，00H 到 1FH 的中斷向量是保留作系統用途的，不可任意使用；而其它的中斷向量則可以自由使用。保留的中斷向量如下表所示：



