# Ghidra

## 甚麼是 逆向工程\(Reverse Engineering\)?

逆向工程是指一般意義上的軟體分析，其物件不僅限於惡意軟體，因此也不一定和電腦安全有關。在軟體領域，逆向工程主要指的是程式碼反組譯已經被編為二進制的機械碼，還原為器語言轉換成組合語言後的程式碼的技術，以及使用除錯器分析軟體行為等工作。

基本上大部份程式於機器上運行時，需要將其高階程式藉由編譯器編譯成組合語言，然後再組譯成機械碼。一般而言這些機械碼都是二進制人類無法閱讀，但是機器可以理解與執行。

## 逆向工程的目的是甚麼？

* 透過反組譯之後的結果，可以找到一些原本隱藏於程式碼中，不打算讓使用者知道的資訊。  \(如:金鑰，記憶體位置，安全漏洞，尚未公佈的系統功能等\)。
* 一直以來，在電腦病毒分析、防止軟體非法使用的防拷貝技術，以及評估軟體強度的抗篡改測試等領域都會用到逆向工程技術。
* 由其結果去修改原程式的二進碼達到驗證的繞過與跳過。
* 還原該程式原始程式碼之後進行修改然後再開發或分享。

此外，由於逆向工程常常被用於惡意軟體分析、防拷貝等領域，因此也經常被歸為安全技術的一種。



## 如何進行逆向工程？

如果我們能對以下三個方面進行監控，那麼就不難跟蹤軟體的行為：

* 檔案的創建、修改和刪除。
* 註冊表專案的創建、修改和刪除。
* 網路通信。

### 靜態分析與動態分析

* 靜態分析：在不執行目的程式的情況下進行分析
  * 閱讀反組譯程式碼
  * 提取可執行檔中的字串，分析使用了哪些單詞


* 動態分析：在執行目的程式的同時進行分析



在軟體分析中，我們需要按照目的和需要選擇使用靜態分析還是動態分析。靜態分析和動態分析的區別在於「是否執行目的程式」 。**靜態分析比較偏向於「綜覽全域」，而動態分析則比較偏向於「細看局部」**。

 使用一些靜態或動態反組譯工具\(如: IDA ，Ghidra ，etc\)將程式反組譯\(甚至反編譯\)並且分析與修改。而動態分析\(如Olly Dbg\) 查看暫存器和記憶體資料了，這個功能可以在程式中斷執行的狀態下確認暫存器、記憶體和變數的狀態。

## Ghidra簡介

Ghidra是一個軟體逆向工程（SRE）框架，包括一套功能齊全的高階軟體分析工具，使使用者能夠在各種平台上分析編譯後的程式碼，包括Windows、Mac OS和Linux。功能包括反組譯，組譯，反編譯，繪圖和指令碼，以及數百個其他功能。Ghidra支援各種處理器指令集和可執行格式，可以在使用者互動模式和自動模式下執行。使用者還可以使用公開的API開發自己的Ghidra外掛和指令碼。



## 參考資料

* [Ghidra官方網站](https://ghidra-sre.org/)
  * [Ghidra快速鍵](https://ghidra-sre.org/CheatSheet.html)
  * [Ghidra github](https://github.com/NationalSecurityAgency/ghidra)
* [\[平安銀河實驗室\] 使用Ghidra P-Code進行輔助逆向分析](https://galaxylab.pingan.com.cn/%E4%BD%BF%E7%94%A8ghidra-p-code%E8%BF%9B%E8%A1%8C%E8%BE%85%E5%8A%A9%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/)
* [CTF 競賽入門指南\(CTF All In One\)：Ghidra](https://www.bookstack.cn/read/CTF-All-In-One/doc-2.2.6_Ghidra.md)

